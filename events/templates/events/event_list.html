{% extends "base.html" %}

<!-- {% load widget_tweaks %} -->

{% url 'events' as events_url %}

{% block title %}Upcoming Events | RunnersHive{% endblock %}

{% block content %}

{% load static %}
{% load crispy_forms_tags %}

<div class="container my-4">
    <h1 class="mb-4 text-center">Upcoming Events</h1>

    <!-- Filter Form -->
    <!-- https://getbootstrap.com/docs/5.0/components/collapse/ -->

    <!-- Toggle Button -->
    <button class="btn btn-dark-outline mb-3" type="button" data-bs-toggle="collapse" data-bs-target="#eventFilters"
        aria-expanded="false" aria-controls="eventFilters">
        Filter Events â–¾
    </button>

    <!-- Collapsible Area -->
    <div class="collapse" id="eventFilters">
        <form method="get" class="mb-4 event-filter-form">
            <div class="filter-group">
                {{ form.category|as_crispy_field }}
            </div>
            <div class="filter-group">
                {{ form.difficulty|as_crispy_field }}
            </div>
            <div class="filter-group">
                {{ form.date_filter|as_crispy_field }}
            </div>
            <div class="filter-group inline-boolean">
                {{ form.cancelled|as_crispy_field }}
            </div>

            <div class="filter-actions">
                <button type="submit" class="btn btn-dark mt-2">Apply Filters</button>
                <a href="{% url 'events' %}" class="btn btn-light mt-2">Reset Filters</a>
            </div>
        </form>
    </div>


    <!-- Events list -->
    {% if events %}
    <!-- One col on small screens, 3 cols on medium or larger screens -->
    <div class="row row-cols-1 row-cols-md-3 g-4">
        {% for event in events %}
        {% include "events/_event_card.html" %}
        {% endfor %}
    </div>
    {% if is_paginated %}
    {% include "events/_page_navigation.html" %}
    {% endif %}

    {% else %}
    <p class="text-center lead">No upcoming events found.</p>
    {% endif %}
</div>
{% endblock %}